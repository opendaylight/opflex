{
  "comments": [
    {
      "key": {
        "uuid": "3cf446d9_31b455ca",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1298,
      "author": {
        "id": 8289
      },
      "writtenOn": "2019-11-08T18:38:00Z",
      "side": 1,
      "message": "What is outReg in this case? Should this be ofport",
      "range": {
        "startLine": 1298,
        "startChar": 15,
        "endLine": 1298,
        "endChar": 16
      },
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e91756bf_2f098b85",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1298,
      "author": {
        "id": 8294
      },
      "writtenOn": "2019-11-08T18:57:24Z",
      "side": 1,
      "message": "I was using a temporary for REG7 which is the register storing output port. So I named it outreg. It can be 0 for veth_host_ac where the ofport is derived using a later rule.",
      "parentUuid": "3cf446d9_31b455ca",
      "range": {
        "startLine": 1298,
        "startChar": 15,
        "endLine": 1298,
        "endChar": 16
      },
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f915e1ed_6360ed22",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1298,
      "author": {
        "id": 8577
      },
      "writtenOn": "2019-11-08T19:18:32Z",
      "side": 1,
      "message": "For the host access tunnel: it wont have ipv4 address (i.e. !tunDst-\u003eis_v4() will be true?)? OR ep.get()-\u003eisNextHopTunnelSet() will be false?",
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1316fa02_857d409d",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1298,
      "author": {
        "id": 8294
      },
      "writtenOn": "2019-11-08T19:27:25Z",
      "side": 1,
      "message": "host access hasTunDest will always be false.That was the reason I had to refactor the code, else the entire if block will be untrue and we skip addition of all these flows.",
      "parentUuid": "f915e1ed_6360ed22",
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b6dd0e9_0392eabd",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1298,
      "author": {
        "id": 8289
      },
      "writtenOn": "2019-11-08T19:35:04Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e91756bf_2f098b85",
      "range": {
        "startLine": 1298,
        "startChar": 15,
        "endLine": 1298,
        "endChar": 16
      },
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "96c58844_f8dfe6a0",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1586,
      "author": {
        "id": 8289
      },
      "writtenOn": "2019-11-08T18:38:00Z",
      "side": 1,
      "message": "Why are we decrementing ttl here? Shouldn\u0027t setting the router mac address be part of the host config?The packet may be bridged, aren\u0027t we changing the packet here?",
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "25bc4798_81842f7e",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1586,
      "author": {
        "id": 8294
      },
      "writtenOn": "2019-11-08T18:57:24Z",
      "side": 1,
      "message": "This really only applies to veth_host_ac, we are routing the packet to linux via veth_host_ac.",
      "parentUuid": "96c58844_f8dfe6a0",
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92ecc397_28998753",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1586,
      "author": {
        "id": 8289
      },
      "writtenOn": "2019-11-08T19:35:04Z",
      "side": 1,
      "message": "I don\u0027t see why we need to set src and dest mac here? We got to the out table because either ep mac was the dst mac or IP matched the ep and dst mac was router mac. We should be setting the src mac, if we routed the packet( in the route table). We could be just bridging, in which case, we should not decrement TTL( it will still have the IP header).",
      "parentUuid": "25bc4798_81842f7e",
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94cecbd9_b46894d9",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1598,
      "author": {
        "id": 8577
      },
      "writtenOn": "2019-11-08T19:29:31Z",
      "side": 1,
      "message": "Just curious, i might be wrong. But is there any traffic flow that can be routed, and doesnt hit the higher flow entries, and not destined to veth_host_ac? The current entry appears generic; is there a possibility of sending non-veth_host_ac bound packets to veth_host_ac?",
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c011e81_cbbc8a4c",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1598,
      "author": {
        "id": 8294
      },
      "writtenOn": "2019-11-08T19:33:17Z",
      "side": 1,
      "message": "I do not believe so. we use conntrack to ensure that only related flows are allowed.",
      "parentUuid": "94cecbd9_b46894d9",
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6800a0a_86776841",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1609,
      "author": {
        "id": 8289
      },
      "writtenOn": "2019-11-08T18:38:00Z",
      "side": 1,
      "message": "Why do we need this flow?",
      "range": {
        "startLine": 1609,
        "startChar": 42,
        "endLine": 1609,
        "endChar": 44
      },
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d7bfaae_4b9e0447",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1609,
      "author": {
        "id": 8294
      },
      "writtenOn": "2019-11-08T18:57:24Z",
      "side": 1,
      "message": "without this rule nothing would match in the route table for packets going via veth_host_ac because they all check the meta.",
      "parentUuid": "a6800a0a_86776841",
      "range": {
        "startLine": 1609,
        "startChar": 42,
        "endLine": 1609,
        "endChar": 44
      },
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "48a2663c_8b15a2b1",
        "filename": "agent-ovs/ovs/IntFlowManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1609,
      "author": {
        "id": 8289
      },
      "writtenOn": "2019-11-08T19:35:04Z",
      "side": 1,
      "message": "This will allow all IP packets sent to the router mac in that VRF to be marked with the meta(asssuming it got thro\u0027 port sec and src table- which is not hard ). If we don\u0027t have the destination subnet, we usually drop the packet, here we seem to allow and make dstepg \u003dsrcepg. \nThis will catch some packets that we would not normally allow from regular EPs and mark them. We may not have the leaf in this case to drop it.",
      "parentUuid": "6d7bfaae_4b9e0447",
      "range": {
        "startLine": 1609,
        "startChar": 42,
        "endLine": 1609,
        "endChar": 44
      },
      "revId": "ae0da64d076bfa8a6574346924bb3e2f3b6234de",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    }
  ]
}